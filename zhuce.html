<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<!-- SEO  -->
		<meta name="keywords" content="" />
		<meta name="description" content="" />
		<meta name="author" content="" />
		<!-- 苹果专用 -->
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="blank" />
		<meta name="format-detection" content="telephone=no" />
		<!-- 简单移动端适配 -->
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
		<!-- 图标 -->
		<link rel="shortcut icon" href="">

		<title>注册</title>
		<link rel="stylesheet" type="text/css" href="css/swiper-3.4.0.min.css" />
		<link rel="stylesheet" type="text/css" href="css/animate.css" />
		<link rel="stylesheet" type="text/css" href="iconfont/iconfont.css"/>
		<style type="text/css">
			html,body{
				width: 100%;
				height: 100%;
				margin: 0;
				padding: 0;
				border: 0;
				
			}
			
			header{
				height: 0.89rem;
				width: 100%;
				position: fixed;
			    left: 0px;
			    top:0px; 
				/*box-shadow: 0px 0px 1px #000000;*/
			}
			.hTop{
				
				width: 100%;
				height: 0.89rem;
				
				background-color: #e4366b;
				color: #fff;
				font-size:0.4rem ;
				font-weight: bold;
				
				line-height: 0.89rem;
				text-align: center;
				font-family: "微软雅黑";
			}
			.s1{
			    display: inline-block;
			    width: 0.89rem;
			    padding-top: 0.24rem;
			    padding-left: 0.2rem;
			    font-size: 0.4rem;
			    font-weight: bold;
			    color: #fff;
				position: absolute;
				left:0 ;
				height:0 ;
			}
			.denglv{
				padding: 0.15rem 0.24rem;
				position: absolute;
				right: 0.24rem;
				top:0.15rem;
				border-radius: 5px;
				background:#e4366b;
				font-size: 0.23rem;
				color: #fff;
				box-shadow: 1px 1px 6px #fff;
			}
			section{
				background-color: #f7f7f7;
				width: 100%;
				position: absolute;
				top: 0.89rem;
			    bottom: 0.95rem;
			    left:0px;
			    font-size: 0.39rem;
				/*box-shadow: 0px 0px 1px #000000;*/
			}
			section>div{
				position: absolute;
			}
			.box{
				width:5.61rem;
				height:4.94rem;
				top:0.62rem;
				left:0.42rem;
				
				/*box-shadow: 0px 0px 1px #000000;*/
			}
			.inp{
				width: 95.5%;
				height: 0.82rem;
				background-color: #fff;
				border-radius: 10px;
				margin-bottom: 0.1rem;
				margin-top: 0.1rem;
				padding-left: 10px;
				outline: none;
				font-size: 0.32rem;
			}
			.box span{
				width: 95.5%;
			    height: 0.42rem;
			    color: red;
			    font-size: 0.30rem;
			    line-height: 0.42rem;
			    display: inline-block;
			    /*border: 1px solid #000000;*/
			}
			.box .inp:last-child{
				margin-bottom: 0rem;
				width: 100%;
				background-color: #e4366b;
				color: #fff;
				font-weight: bold;
				padding-left: 0px;
				font-size: 0.32rem;
				border: 0px;
				
			}
			.btn_dv{
				width: 100%;
			    height: 100%;
			    text-align: center;
			    line-height: 100%;
			    background-color: #303028;
			    z-index: 1;
			    opacity: 0.8;
			    color: #fff;
			}
			.go_font{
				    margin-top: 3.5rem;
			}
			
			.go_btn{
				padding: 15px 39px;
			    background-color: palevioletred;
			    
			    color: #fff;
			    border: 0px;
			    margin-top: 10px;
			    border-radius: 8px;
			    font-size: 0.3rem;
			}
			/*尾部*/
			footer{
				height: 0.95rem;
				width: 100%;
				position: fixed;
			    bottom: 0px;
			    left:0px; 
			    
				box-shadow: 0px 0px 1px #000000;
				background-color:#484850;
			}
			.footer_a{
				float: left;
				display: inline-block;
				width: 20%;
				height: 99%;
				border-top: 4px solid #484850;
				text-decoration: none;
				color: #fff;
				text-align: center;
				font-size: 0.24rem;
				font-weight: bold;
			}
			footer a:nth-child(4){
				border-top: 4px solid #E4366B;
			}
			.footer_sp{
				display: block;
				width: 100%;
				height: 0.50rem;
				line-height: 0.5rem;
				text-align: center;
			}
		</style>
	</head>

	<body>
		<header>
			<span class="s1 iconfont">&#xe619;</span>
			<div class="hTop">
				注册
			</div>
			<a class="denglv" href="denglu.html">登录</a>
		</header>
		<section class="container">
			<div class="box">
				<form class="ff">
					<input type="text" class="inp zhanghao" placeholder="账号 以字母开头，长度在不小于6" />
					<span class="sz"></span>
					<input type="text" class="inp mima" placeholder="密码"/>
					<span class="smi"></span>
					<input type="text" class="inp chongfu" placeholder="重复密码"/>
					<span class="smm"></span>
					<button class="inp btn">同意服务协议并注册</button>
				</form>
			</div>
			  
		</section>
		<footer>
			        <a class="footer_a" href="shouye.html" >
						<span class="footer_sp iconfont">&#xe644;</span>
						首页
					</a>
				    <a class="footer_a" href="fenlei.html">
						<span class="footer_sp iconfont">&#xe692;</span>
						分类
					</a>
				
					<a class="footer_a" href="cart.html">
						<span class="footer_sp iconfont">&#xe61b;</span>
						购物车
					</a>
				
					<a class="footer_a" href="myxiu.html">
						<span class="footer_sp iconfont">&#xe646;</span>
						我的秀
					</a>
					<a class="footer_a" href="gengduo.html">
						<span class="footer_sp iconfont">&#xe651;</span>
						更多
					</a>
		
		</footer>
		

		<script src="js/jquery-1.11.0.js" type="text/javascript"></script>
		<script src="js/rem.js" type="text/javascript"></script>
		<script src="js/swiper-3.4.0.jquery.min.js" type="text/javascript"></script>
		<script src="js/swiper.animate1.0.2.min.js" type="text/javascript"></script>
		<script src="js/iscroll.js" type="text/javascript"></script>
		<script type="text/javascript">
		   $(".footer_a").on("click",function(){
		   	  $(".footer_a").css("border-top","4px solid #484850");
		   	   $(this).css("border-top","4px solid #E4366B");
		   })
		    $(".s1").on("click",function(){
		   	   window.location.href='myxiu.html';
		   })
		   var tijiao=true;
		   //账号验证
		   $(".zhanghao").blur(function(){

		   	 if($(this).val()){
			   	 	if(!(/^[a-zA-Z0-9]{5}$/.test($(this).val()))){
			   	 		$(".sz").html('');
		                $(".sz").html('账号格式正确').css("color","yellowgreen");
		                tijiao=true;
		                console.log(tijiao)
			               
	        		}else{
	        			$(".sz").html('');
	        			$(".sz").html('*以字母开头，长度不小于6');
	        			tijiao=false;
	        			 console.log(tijiao)
	        		}
		   	 }else{
			   	 	$(".sz").html('');
			   	 	$(".sz").html('*用户名不能为空');
			   	 	tijiao=false;
			   	 	 console.log(tijiao)
		   	 }
		   	
		   	
		   });
		   
		   //密码验证1
		    $(".mima").blur(function(){
			   	 if(!$(this).val()){
			   	 	    $(".smi").html('');
				   	 	$(".smi").html('*密码不能为空');
				   	 	tijiao=false;
				   	 	 console.log(tijiao)
			   	 }else{
			   	 	$(".smi").html('');
				   	$(".smi").html('密码输入成功').css('color',"yellowgreen");
				   	tijiao=true;
				   	 console.log(tijiao)
			   	 }
		   });
		   
		   //密码验证2
		    $(".chongfu").keyup(function(){
		    	
			   	 if($(this).val()){
			   	 	if($(this).val()==$('.mima').val()){
			   	 		$(".smm").html('').css('color',"red");
				   	    $(".smm").html('密码一致').css('color',"yellowgreen");
				   	    tijiao=true;
				   	     console.log(tijiao)
			   	 	}else{
			   	 		$(".smm").html('');
				   	    $(".smm").html('*两次密码不一致请您重复输入');
				   	    tijiao=false;
				   	     console.log(tijiao)
			   	 	}
			   	 }else{
			   	 	$(".smm").html('');
				   	$(".smm").html('*请您重复输入密码');
				   	tijiao=false;
				   	console.log(tijiao)
			   	 }
		   });
		   $(".chongfu").blur(function(){
		    	
			   $(this).trigger("keyup");
		   });
		   
		   
		   //{"status":"register","userID":"w1234666","pwd":123}
		   
		   
		   $(".ff").submit(function(){
		   	     
		   	    var user=$(".zhanghao").val();
    			var pwd=$(".mima").val();
		   	    var pwdTow=$('.chongfu').val();
		   	    
		   	    
		   	    var btn_dv="<div class='btn_dv'></div>";
				$(".container").append(btn_dv);
				var go_font="<p class='go_font'><p>";
				$(".btn_dv").append(go_font);
				var go_btn="<button class='go_btn'></button>";
				$(".btn_dv").append(go_btn);
		   	    
//		   	    alert(tijiao);
		   	    if(tijiao){
//		   	    	alert('向服务器提交')
		   	    	//创建对象
		   	    	var dataJSON={
				      	"status":"register",
				      	"userID":user,
				      	"password":pwd
				      }
		   	    	//向服务器端发送请求
		   	    	$.ajax({
			    		type:'POST',
			    		url:'http://datainfo.duapp.com/shopdata/userinfo.php',
			    		data:dataJSON,//需要传的参数
			    		success:function(data){
			    			console.log("服务器端发回数据"+data);
			    			if(data==1){
			    				
			    				 var tmpuser=JSON.stringify(dataJSON);
			    				 localStorage.setItem("user",tmpuser);
			    				 console.log("注册成功 并 本地存储成功")
			    				 
					   	    	$(".go_font").html('恭喜您注册成功');
					   	    	$(".go_btn").html('去登陆');
					   	    	$(document).on('click','.go_btn',function(){
					   	    		window.location.href='denglu.html'
					   	    	})
			    			}if(data==0){
			    				
					   	    	$(".go_font").html('对不起，您的用户名重名');
					   	    	$(".go_btn").html('重新注册');
					   	    	$(document).on('click','.go_btn',function(){
					   	    		$(".btn_dv").remove();
					   	    	})
			    			}
			    			
			    		},
			    		error:function(XMLHttpRequest,textStatus,errorThrown){
			    			console.log("XMLHttpRequest=="+XMLHttpRequest);
			    			console.log("textStatus=="+XMLHttpRequest);
			    			console.log("errorThrown=="+errorThrown);
			    		}
			    		
			    	})
		   	    	
		   	    	
		   	    	
		   	    }else{
		   	    	
			   	    $(".go_font").html('您的信息填写有误，无法提交');
					$(".go_btn").html('继续填写');
					$(document).on('click','.go_btn',function(){
					   	    		$(".btn_dv").remove();
					})
			   	    
		   	    }
		   	    
		   	   return false; 
		   	
		   	
		   	
//		   	   window.location.href='denglu.html';
		   })
			
		</script>
	</body>

</html>